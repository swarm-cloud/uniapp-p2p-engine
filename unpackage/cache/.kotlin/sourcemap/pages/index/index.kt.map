{"version":3,"sources":["pages/index/index.uvue","pages/index/index.uvue?type=page"],"sourcesContent":["<template>\r\n\t<view class=\"content\">\n\t\r\n\t\t<video class=\"video\" ref=\"video\" id=\"video\" :header=\"header\"  :src=\"src\" @error=\"onError\" :controls=\"true\"></video>\r\n\t\t<button type=\"primary\" @tap=\"initCdnbye\">初始化cdnbye</button>\n\t\t <button @tap=\"startPlay\">p2p播放</button>\n\t\t <button @tap=\"stop\">停止播放</button>\n\t\t <button @tap=\"stopP2p\">停止P2P</button>\n\t\t <button @tap=\"isConnected\">是否CDNBye连接</button>\n\t\t \n\t\t \r\n\t</view>\r\n</template>\r\n\r\n<script>\n\t\n\timport { ConfigOptions,initP2p,getP2pUrl,getP2pEngineVersion,p2pIsConnected,shutdownP2p } from \"@/uni_modules/xtf-swarmcloud\";\r\n\texport default {\n\t\tonReady() {\n\t\t\t//注意uniappx 的video组建ios没有实现 请自行更换其他播放器\n\t\t      this.videoContext = uni.createVideoContext('video', this);\n\t\t    },\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvideoContext: null as VideoContext | null,\n\t\t\t\theader: {\n\t\t\t\t          'User-Agent': 'User-Agent test',\n\t\t\t\t          'header': 'header test',\n\t\t\t\t          'cookie': 'cookie test'\n\t\t\t\t        } as UTSJSONObject,\n\t\t\t\t// 属性\n\t\t\t\tsrc:\"\",\n\t\t\t\toldsrc: \"https://s5.bfengbf.com/video/17haoyinlecangkudierji/20240216/index.m3u8\",\n\t\t\t\t\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad() {\r\n\r\n\t\t},\n\t\tonShow() {\n\t\t\t\n\t\t},\r\n\t\tmethods: {\n\t\t\tinitCdnbye: function () {\n\t\t\t\t\n\t\t\t\tlet options = {\n\t\t\t\t   logEnabled: true,\n\t\t\t\t   logLevel: 1,\n\t\t\t\t   trackerZone:0\n\t\t\t\t } as ConfigOptions;\n\t\t\t\t initP2p(\"4-iRPC_GR\",options);\n\t\t\t\t console.log(getP2pEngineVersion());\n\t\t\t\t \n\t\t\t},\n\t\t\t\n\t\t\tstartPlay(){\n\t\t\t\tthis.src=getP2pUrl(this.oldsrc);\n\t\t\t\tconsole.log(this.src);\n\t\t\t\t\n\t\t\t\tthis.videoContext?.play();\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t},\n\t\t\tisConnected(){\n\t\t\t\t//开始播放了才为true\n\t\t\t\tconsole.log(p2pIsConnected());\n\t\t\t},\n\t\t\tstopP2p(){\n\t\t\t\tshutdownP2p();\n\t\t\t},\n\t\t\tstop(){\n\t\t\t\tthis.videoContext?.stop();\n\t\t\t},\n\t\t\t\n\t\t\tonError: function (res : UniVideoErrorEvent) {\n\t\t\t        console.log(res.type + \" -> \" + JSON.stringify(res.detail));\n\t\t\t       \n\t\t\t},\r\n\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t.content {\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tjustify-content: center;\r\n\t}\r\n\r\n\t.logo {\r\n\t\theight: 200rpx;\r\n\t\twidth: 200rpx;\r\n\t\tmargin-top: 200rpx;\r\n\t\tmargin-bottom: 50rpx;\r\n\t}\r\n\r\n\t.title {\n\t\tfont-size: 36rpx;\r\n\t\tcolor: #8f8f94;\r\n\t}\r\n</style>\n",null],"names":[],"mappings":";;;;;;;;;;;;;;;;;AAgBC,qCAAS;qCAAc;qCAAQ;qCAAU;qCAAoB;qCAAe;+BAI7C;;;gBAF9B,MAAU;YAEJ,IAAI,CAAC,YAAW,GAAI,uBAAuB,SAAS,IAAI;QAC1D;;eAeJ,sBAAS,CAET;mBACA,MAAS,CAET;;;;;;eAxCD,mBAUO,QAAA,SAVD,WAAM,YAAS;YAEpB,mBAAmH,SAAA,SAA5G,WAAM,SAAQ,SAAI,SAAQ,QAAG,SAAS,YAAQ,KAAA,MAAM,EAAI,SAAK,KAAA,GAAG,EAAG,aAAO,KAAA,OAAO,EAAG,cAAU,IAAI;;;;;YACzG,mBAA2D,UAAA,SAAnD,UAAK,WAAW,aAAK,KAAA,UAAU,GAAE,aAAS,CAAA,EAAA;gBAAA;aAAA;YACjD,mBAAuC,UAAA,SAA9B,aAAK,KAAA,SAAS,GAAE,SAAK,CAAA,EAAA;gBAAA;aAAA;YAC9B,mBAAiC,UAAA,SAAxB,aAAK,KAAA,IAAI,GAAE,QAAI,CAAA,EAAA;gBAAA;aAAA;YACxB,mBAAqC,UAAA,SAA5B,aAAK,KAAA,OAAO,GAAE,SAAK,CAAA,EAAA;gBAAA;aAAA;YAC5B,mBAA8C,UAAA,SAArC,aAAK,KAAA,WAAW,GAAE,cAAU,CAAA,EAAA;gBAAA;aAAA;;;aAgBpC,cAAsB;aACtB,QAIa;aAEb;aACA;;;wBARA,kBAAc,IAAG,CAAE,EAAC,CAAE,eACtB,YAAQ;YACE,mBAAc;YACd,aAAU;YACV,aAAU;SACZ,EAER,SAAI,IACJ,YAAQ;;;aAWT,aAAY,MAAY;YAEvB,IAAI,wBACD,aAAY,IAAI,EAChB,WAAU,CAAC,EACX,cAAY,CAAA;YAEd,QAAQ,aAAY;YACpB,QAAQ,GAAG,CAAC,uBAAsB;QAEpC;;aAEA,YAAA,MAAW;YACV,IAAI,CAAC,GAAG,GAAC,UAAU,IAAI,CAAC,MAAM;YAC9B,QAAQ,GAAG,CAAC,IAAI,CAAC,GAAG,EAAC;YAErB,IAAI,CAAC,YAAY,EAAE;QAKpB;;aACA,cAAA,MAAa;YAEZ,QAAQ,GAAG,CAAC,kBAAiB;QAC9B;;aACA,UAAA,MAAS;YACR;QACD;;aACA,OAAA,MAAM;YACL,IAAI,CAAC,YAAY,EAAE;QACpB;;aAEA,UAAS,IAAU,KAAM,kBAAkB,EAAE;YACrC,QAAQ,GAAG,CAAC,IAAI,IAAG,GAAI,SAAS,KAAK,SAAS,CAAC,IAAI,MAAM,GAAE;QAEnE;;;sBApCA;sBAYA;sBAUA;sBAIA;sBAGA;sBAIA,UAAmB,KAAM"}